<!-- Start Configuration page, source file is plugin-resources/webapp/xnat-templates/screens/Configuration.vm -->
<style>
IMG{
 border:0;
}
</style>
<div class="yui-skin-sam">
<div id="tp_fm" style="display:none"></div>
<table width="98%" style="">
    <tr>
        <td valign="top" width="680">
            <div class="edit_header1">Configuration</div><br/>

#if($data.getSession().getAttribute("user").checkRole("Administrator"))
            <script type="text/javascript" src="$content.getURI("scripts/yui/build/resize/resize-beta-min.js")"></script>
            <script type="text/javascript" src="$content.getURI("scripts/yui/build/layout/layout-beta-min.js")"></script>
            <script type="text/javascript" src="$content.getURI("scripts/search/tabManager.js")"></script>
            <script type="text/javascript" src="$content.getURI("scripts/search/saveSearch.js")"></script>
            <script type="text/javascript" src="$content.getURI("scripts/search/dataTableSearch.js")"></script>
            <script type="text/javascript" src="$content.getURI("scripts/search/dataTableStoredSearch.js")"></script>
            <script type="text/javascript" src="$content.getURI("scripts/yui/xnat_loader.js")"></script>
            
            <!-- BEGIN TABS AND CONTENT DISPLAY: Taken from xnat_projectData_summary_tabs.vm -->
            <style>
                span.spacer {
                    height:12px;
                    width:1px;
                }
            </style>
            <div id="configuration_tabs_module" style="display:none">
                <div id="configurationTabs" class="yui-navset">
                    <ul class="yui-nav">
                        <li class="selected"><a href="#siteInfo"><em>Site Information<span class="spacer"></span></em></a></li>
                        <li><a href="#fileSystem"><em>File System<span class="spacer"></span></em></a></li>
                        <li><a href="#registration"><em>Registration<span class="spacer"></span></em></a></li>
                        <li><a href="#dicomReceiver"><em>DICOM Receiver<span class="spacer"></span></em></a></li>
                        #foreach($tab in $tabs)
                            <li><a href="#$tab.getProperty("divName")"><em>$tab.getProperty("title")<span class="spacer"></span></em></a></li>
                        #end
                    </ul>
                    <div class="yui-content">   
                        <div id="siteInfo">
                            <p>#parse('screens/configuration/siteInfo.vm')</p>
                        </div>
                        <div id="fileSystem">
                            <p>#parse('screens/configuration/fileSystem.vm')</p>
                        </div>
                        <div id="registration">
                            <p>#parse('screens/configuration/registration.vm')</p>
                        </div>
                        <div id="dicomReceiver">
                            <p>#parse('screens/configuration/dicomReceiver.vm')</p>
                        </div>
                        #foreach($tab in $tabs)
                            <div id="$tab.getProperty("divName")">
                                #set($path = "screens/configuration/${tab.getProperty('fileName')}")
                                <p>#parse($path)</p>
                            </div>
                        #end
                    </div>
                </div>
            </div>

            <script type="text/javascript">   
                function configurationIndexChanged() {
                   var activeIndex = this.get("activeIndex");
                   YAHOO.util.Cookie.set("configuration.tab.index", activeIndex);
                }
                   
                function configurationTabManagerInit() {
                    window.configurationTabView = new YAHOO.widget.TabView('configurationTabs');   
                    window.configuration_tabs_module = new YAHOO.widget.Module("configuration_tabs_module", {visible:false, zIndex:5});
                    window.configuration_tabs_module.show();           
                    window.configurationTabView.subscribe("activeTabChange", configurationIndexChanged);
                }
                
                configurationTabManagerInit();
            </script>
            <!-- END TABS AND CONTENT DISPLAY: Taken from xnat_projectData_summary_tabs.vm -->
        </td>
    </tr>
    <tr>
        <td colspan="3">
#else
        </td>
    </tr>
    <tr>
        <td colspan="3">
            <div id="congratsContainer" class="container" style="width:98%;margin:5px;background-color:#ff99cc;">
                <div id="congratsBody" class="containerBody">
                    <div class="containerItem edit_header2" style="white-space:normal;line-height:18px"><FONT size="+1">Security Warning</FONT></DIV>
                    <div class="containerItem" style="white-space:normal;">You do not have administrator access and can't access this page.</DIV>
                </div>
            </div>
#end
        </td>
    </tr>
</table>

<!-- End Configuration page, source file is plugin-resources/webapp/xnat-templates/screens/Configuration.vm -->
